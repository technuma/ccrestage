# Interactive Flow Mode 手動テスト手順

## テスト環境の準備

1. ターミナルを開く
2. ccreplayディレクトリに移動
3. 以下のコマンドを実行：
   ```bash
   ./ccreplay.ts f9446e57-7c4f-4948-828e-6d0c18de6874.jsonl --interactive-flow
   ```

## テストシナリオ

### シナリオ1: 基本的な表示確認
1. 起動後、操作説明が表示されることを確認
2. 任意のキーを押して開始
3. →キーを押して最初のメッセージ（「こんにちは」）が表示されることを確認

### シナリオ2: 空行問題の確認
1. →キーを複数回押して以下のメッセージまで進む：
   - 「現在の日時を表示する3行のシェルスクリプトを作成します。」
   - 「Write(/Users/kazuya.onuma/works/ccreplay/show_datetime.sh)」
2. **重要**: Writeの後に→キーを押した時に：
   - 空行だけが表示される問題があるか確認
   - 次の実際のメッセージ（「Run command: chmod +x show_datetime.sh」）が表示されるか確認

### シナリオ3: 削除と再表示
1. メッセージを表示した後、←キーで削除
2. 画面全体が再描画されるのではなく、最後のメッセージだけが消えることを確認
3. →キーで削除したメッセージが再表示されることを確認

### シナリオ4: tool_result後の表示
1. 以下の箇所で特に注意して確認：
   - Write実行後
   - chmod実行後
   - スクリプト実行後
2. 各tool使用後に→キーを押した時、空行ではなく次のメッセージが表示されることを確認

## 期待される動作

- tool_resultのみのユーザーメッセージはスキップされる
- →キーで常に実際のコンテンツが表示される
- ←キーで削除しても画面全体の再描画は起きない

## 問題の記録

発見した問題を以下に記録：
- [ ] Writeの後に空行が表示される
- [ ] Run commandの後に空行が表示される
- [ ] その他の問題：

## デバッグ用コマンド

問題を詳しく調査する場合：
```bash
# エントリ数を確認
cat f9446e57-7c4f-4948-828e-6d0c18de6874.jsonl | wc -l

# tool_resultのみのエントリを確認
cat f9446e57-7c4f-4948-828e-6d0c18de6874.jsonl | jq 'select(.type == "user" and .message.content[0].type == "tool_result") | {uuid, parentUuid}'
```