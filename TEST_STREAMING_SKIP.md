# Interactive Flow Mode - ストリーミングスキップ機能テスト

## 新機能の概要

ノベルゲームのような操作感を実現：
- ストリーミング中に→キーを押すと、残りのテキストが即座に表示される
- ストリーミングが完了している場合は、次のメッセージに進む

## テスト手順

### 1. 基本的なストリーミングスキップ
```bash
./ccreplay.ts f9446e57-7c4f-4948-828e-6d0c18de6874.jsonl --interactive-flow
```

1. →キーを押してメッセージのストリーミングを開始
2. テキストが流れている最中に→キーを押す
   - 残りのテキストが即座に表示される
   - ストリーミングアニメーションがスキップされる

### 2. 長いメッセージでのテスト
1. 長いアシスタントメッセージ（例：最初の挨拶）まで進む
2. ストリーミングが始まったらすぐに→キーを押す
   - 全文が即座に表示される

### 3. 複数行メッセージのスキップ
1. 複数行にわたるメッセージのストリーミング中に→キーを押す
   - 残りの全行が即座に表示される
   - 改行も正しく処理される

### 4. 連続スキップ操作
1. ストリーミング中に→キーを押してスキップ
2. 表示完了後、もう一度→キーを押す
   - 次のメッセージに進む（正常な動作）

### 5. 自動再生中のスキップ
1. 'a'キーで自動再生を開始
2. ストリーミング中に→キーを押す
   - 現在のメッセージがスキップされる
   - 自動再生は継続される

## 期待される動作

- ストリーミング中：→キーで残りのテキストを即座に表示
- ストリーミング完了後：→キーで次のメッセージへ
- スキップしても表示が崩れない
- 部分的に表示されたテキストと残りのテキストが正しく結合される

## デバッグ

問題がある場合：
```bash
# StreamingEffectの状態を確認
DEBUG=true ./ccreplay.ts f9446e57-7c4f-4948-828e-6d0c18de6874.jsonl --interactive-flow
```

## ノベルゲーム風の操作感

1. テキストが流れているときに→キー
   → 残りのテキストを表示（読み飛ばし）
   
2. テキスト表示完了後に→キー
   → 次のメッセージへ進む

3. ←キーで前のメッセージを非表示
   → 会話を巻き戻す感覚

これにより、ユーザーは自分のペースで会話を読み進められます。